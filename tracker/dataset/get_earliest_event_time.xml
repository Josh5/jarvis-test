<dataset read="*" write="">
    <select>
        SELECT 
            MIN(start_time) AS t
        FROM
        (
            SELECT MIN(start_time) AS start_time
            FROM request 
            WHERE
                ({$sid} IS NULL OR sid = {$sid})
                AND ({$user} IS NULL OR username = {$user})
                AND ({$app_name} IS NULL OR app_name = {$app_name})
                AND ({$dataset} IS NULL OR dataset = {$dataset})
                AND ({$from} IS NULL OR start_time >= {$from})
                AND ({$to} IS NULL OR start_time &lt;= {$to})
                AND ({$text} IS NULL OR params like '%' || {$text} || '%')
            UNION
            SELECT MIN(start_time) AS start_time
            FROM error 
            WHERE
                ({$sid} IS NULL OR sid = {$sid})
                AND ({$user} IS NULL OR username = {$user})
                AND ({$app_name} IS NULL OR app_name = {$app_name})
                AND ({$dataset} IS NULL OR dataset = {$dataset})
                AND ({$from} IS NULL OR start_time >= {$from})
                AND ({$to} IS NULL OR start_time &lt;= {$to})
                AND ({$text} IS NULL OR params like '%' || {$text} || '%' OR post_body like '%' || {$text} || '%')
        )
    </select>
</dataset>
