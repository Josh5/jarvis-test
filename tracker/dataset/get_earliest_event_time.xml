<dataset read="*" write="">
    <select>
        SELECT 
            julian(MIN(start_time)) AS t
        FROM
        (
            SELECT MIN(start_time) AS start_time
            FROM request 
            WHERE
                ({$sid}::integer IS NULL OR sid = {$sid})
                AND ({$user}::text IS NULL OR username = {$user})
                AND ({$app_name}::text IS NULL OR app_name = {$app_name})
                AND ({$dataset}::text IS NULL OR dataset = {$dataset})
                AND ({$from}::timestamp IS NULL OR start_time >= {$from})
                AND ({$to}::timestamp IS NULL OR start_time &lt;= {$to})
                AND ({$text}::text IS NULL OR params like '%' || {$text} || '%')
            UNION
            SELECT MIN(start_time) AS start_time
            FROM error 
            WHERE
                ({$sid}::integer IS NULL OR sid = {$sid})
                AND ({$user}::text IS NULL OR username = {$user})
                AND ({$app_name}::text IS NULL OR app_name = {$app_name})
                AND ({$dataset}::text IS NULL OR dataset = {$dataset})
                AND ({$from}::timestamp IS NULL OR start_time >= {$from})
                AND ({$to}::timestamp IS NULL OR start_time &lt;= {$to})
                AND ({$text}::text IS NULL OR params like '%' || {$text} || '%' OR post_body like '%' || {$text} || '%')
        ) u
    </select>
</dataset>
