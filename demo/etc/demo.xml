<?xml version="1.0" encoding="utf-8"?>
<jarvis>
    <app format="json" dump="no">
        <tracker logins="yes" requests="yes" errors="yes">
            <dbfile>/var/lib/jarvis/tracker/tracker.db</dbfile>
        </tracker>

        <!-- This is where our <dataset>.xml are all stored -->
	<dataset_dir>/usr/share/jarvis/demo/dataset</dataset_dir>

        <!-- For server-side paging and sorting -->
        <page_limit_param>limit</page_limit_param>
        <page_start_param>start</page_start_param>
        <sort_field_param>sort</sort_field_param>
        <sort_dir_param>dir</sort_dir_param>

        <!-- XML Habitat. Contents are entirely free form.  This is 100% example only.
             For requests with &format=xml we will include the <habitat></habitat>.

             BE WARNED.  Your HABITAT is PUBLIC.  Login is not required in order
             to view the habitat.
        -->
        <habitat>
            <install_type>production</install_type>
            <parameter name="pname" value="some_value"/>
            <parameter name="another" value="a_different_value"/>
        </habitat>

        <!-- This defines how our sessions are stored.  See CGI::Session. -->
        <sessiondb store="driver:file;serializer:default;id:md5" expiry="+2h" cookie="DEMO_CGISESSID">
            <parameter name="Directory" value="/tmp/demo"/>
        </sessiondb>

        <!-- Global default parameters -->
        <default_parameters>
            <parameter name="max_rows" value="500"/>
        </default_parameters>

        <!-- This gives a sample configuration where the Login validation is performed by
             database lookup.  These values should work with the demo SQLite
             database SQL included with this distribution.
             -->
        <login module="Jarvis::Login::Database">
            <parameter name="user_table" value="users"/>
            <parameter name="user_username_column" value="name"/>
            <parameter name="user_password_column" value="password"/>
            <parameter name="group_table" value="groups"/>
            <parameter name="group_username_column" value="name"/>
            <parameter name="group_group_column" value="group_name"/>
            <parameter name="encryption" value="md5"/>
            <parameter name="salt_prefix_len" value="2"/>
        </login>

        <!-- This defines our database connection.  SQLite in our case. -->
        <database connect="dbi:SQLite:dbname=/var/lib/jarvis/demo/demo.db" username="" password=""/>

        <!-- This plugin is used to allow admin users to reset any user's password. -->
        <plugin dataset="SetPassword" access="*" lib="/usr/share/jarvis/demo" module="plugin::SetPassword" add_headers="yes"/>

        <!-- This is a very simple 'exec' action.  It uses "echo" to show you the supplied
             command line parameters.  Access it via:

             http://localhost/jarvis-agent/demo/echo

             Note that access = "**", so login is not required in order to access this particular exec.
             -->
        <exec dataset="echo" access="**" command="echo" add_headers="yes" filename_parameter="filename"/>
    </app>
</jarvis>
