<dataset read="*" write="*">
    <select>
SELECT id, name,
        COALESCE (registration_num, 0) as registration_num,
        class,
        COALESCE (owner, '') AS owner,
        COALESCE (description, '') AS description
FROM boat
WHERE (class = {{boat_class}) OR ({{boat_class}} IS NULL)
ORDER BY name;
    </select>
    <update>
UPDATE boat
SET name = TRIM ({{name}}),
    registration_num = NULLIF ({{registration_num}}, 0),
    class = TRIM ({{class}}),
    owner = NULLIF (TRIM ({{owner}}), ''),
    description = NULLIF (TRIM ({{description}}), ''),
    change_user = {{__username}},
    change_date = datetime ('now')
WHERE id = {{id}};
    </update>
    <insert returning="yes">
INSERT INTO boat (name, registration_num, class, owner, description, change_user, change_date)
VALUES ({{name}},
        NULLIF ({{registration_num}}, 0),
        NULLIF (TRIM ({{class}}), ''),
        NULLIF (TRIM ({{owner}}), ''),
        NULLIF (TRIM ({{description}}), ''),
        {{__username}}, datetime ('now'));
    </insert>
    <delete>
DELETE FROM boat
WHERE id = {{id}};
    </delete>
</dataset>
